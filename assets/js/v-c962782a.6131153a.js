"use strict";(self.webpackChunkdemo1=self.webpackChunkdemo1||[]).push([[9885],{1455:(n,s,a)=>{a.r(s),a.d(s,{data:()=>p});const p={key:"v-c962782a",path:"/vue/2022/20221002.html",title:"vue项目中如何配置环境变量",lang:"zh-CN",frontmatter:{title:"vue项目中如何配置环境变量",date:"2022-10-02T00:00:00.000Z",tags:["vue"],categories:["vue"]},excerpt:"",headers:[],git:{updatedTime:null,contributors:[]}}},7391:(n,s,a)=>{a.r(s),a.d(s,{default:()=>t});const p=(0,a(6252).uE)('<div class="custom-container tip"><p class="custom-container-title">TIP</p><p>项目开发中，我们可能有多种环境，开发环境，线上环境，测试环境等等，这一篇就来讲讲如何配置环境变量</p></div><h1 id="代码部分" tabindex="-1"><a class="header-anchor" href="#代码部分" aria-hidden="true">#</a> 代码部分</h1><p>创建好一个 vue 项目</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>在项目根目录下创建环境配置文件：\n<span class="token punctuation">.</span>env<span class="token punctuation">.</span>development ：开发环境\n<span class="token punctuation">.</span>env<span class="token punctuation">.</span>production ：打包的时候会执行的环境\n<span class="token punctuation">.</span>env<span class="token punctuation">.</span>test ：测试环境\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token punctuation">.</span>env<span class="token punctuation">.</span>development 文件 （其他环境文件同理）\n<span class="token comment">// 请注意，只有 NODE_ENV，BASE_URL 和以 VUE_APP_ 开头的变量将通过 webpack.DefinePlugin 静态地嵌入到客户端侧的代码中，这个案例中使用了 VUE_APP_</span>\n<span class="token constant">VUE_APP_BASE_URL</span><span class="token operator">=</span> <span class="token string">&quot;127.0.0.7&quot;</span> \n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>vue<span class="token punctuation">.</span>config<span class="token punctuation">.</span>js 文件\n\n<span class="token keyword">const</span> <span class="token punctuation">{</span> defineConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#39;@vue/cli-service&#39;</span><span class="token punctuation">)</span>\n<span class="token comment">// 可以在这里书写这行代码测试是否配置成功，终端执行不同的命令会打印不同的环境:例 yarn run dev</span>\nconsole<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_BASE_URL</span><span class="token punctuation">)</span>  <span class="token comment">// 127.0.0.7</span>\n\nmodule<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">defineConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>\n  <span class="token literal-property property">transpileDependencies</span><span class="token operator">:</span> <span class="token boolean">true</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>配置测试后，可以在 api 文件中使用环境变量，从而实现一套代码不同环境</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>例：\n<span class="token operator">...</span><span class="token operator">...</span>\n<span class="token comment">// url.startsWith ：判断 url 是否以（）中的条件开头</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;/customer&#39;</span><span class="token punctuation">)</span> <span class="token operator">||</span> url<span class="token punctuation">.</span><span class="token function">startsWith</span><span class="token punctuation">(</span><span class="token string">&#39;/file&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    url <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">VUE_APP_CM_URL</span> <span class="token operator">+</span> url  <span class="token comment">// 使用环境变量</span>\n  <span class="token punctuation">}</span> \n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h1 id="多套环境" tabindex="-1"><a class="header-anchor" href="#多套环境" aria-hidden="true">#</a> 多套环境</h1><p>在 package.json 文件中</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>例：\n<span class="token punctuation">{</span>\n  <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;env&quot;</span><span class="token punctuation">,</span>\n  <span class="token string-property property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.1.0&quot;</span><span class="token punctuation">,</span>\n  <span class="token string-property property">&quot;private&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n  <span class="token string-property property">&quot;scripts&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>\n    <span class="token string-property property">&quot;serve&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve&quot;</span><span class="token punctuation">,</span>\n    <span class="token string-property property">&quot;dev&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service serve --mode development&quot;</span><span class="token punctuation">,</span> <span class="token comment">//执行这个脚本会找到development环境文件</span>\n    <span class="token string-property property">&quot;build:test&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode test&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包使用测试环境</span>\n    <span class="token string-property property">&quot;build:prod&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service build --mode production&quot;</span><span class="token punctuation">,</span> <span class="token comment">// 打包使用生产环境</span>\n    <span class="token string-property property">&quot;lint&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vue-cli-service lint&quot;</span>\n  <span class="token punctuation">}</span><span class="token punctuation">,</span>\n  <span class="token operator">...</span><span class="token operator">...</span>\n<span class="token punctuation">}</span>\n\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div>',11),e={},t=(0,a(3744).Z)(e,[["render",function(n,s){return p}]])}}]);